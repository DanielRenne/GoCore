/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2017 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(a,t,i){"use strict";t.AppMailbox=App.extend({handleAction:function(){var a=i(".site-action").actionBtn().data("actionBtn"),t=i("[data-selectable]");i(".site-action-toggle",".site-action").on("click",function(a){0===t.asSelectable("getSelected").length&&(i("#addMailForm").modal("show"),a.stopPropagation())}),i('[data-action="trash"]',".site-action").on("click",function(){console.log("trash")}),i('[data-action="inbox"]',".site-action").on("click",function(){console.log("folder")}),t.on("asSelectable::change",function(t,i,e){e?a.show():a.hide()})},handleListItem:function(){i("#addLabelToggle").on("click",function(a){i("#addLabelForm").modal("show"),a.stopPropagation()}),i(a).on("click","[data-tag=list-delete]",function(a){bootbox.dialog({message:"Do you want to delete the label?",buttons:{success:{label:"Delete",className:"btn-danger",callback:function(){}}}})})},itemTpl:function(a){return'<tr id="'+a.id+'" data-mailbox="slidePanel" '+("true"===a.unread?'class="unread"':"")+'><td class="cell-60"><span class="checkbox-custom checkbox-primary checkbox-lg"><input type="checkbox" class="mailbox-checkbox selectable-item" id="mail_'+a.id+'"/><label for="mail_'+a.id+'"></label></span></td><td class="cell-30 responsive-hide"><span class="checkbox-important checkbox-default"><input type="checkbox" class="mailbox-checkbox mailbox-important" '+("true"===a.starred?'checked="checked"':"")+' id="mail_'+a.id+'_important"/><label for="mail_'+a.id+'_important"></label></span></td><td class="cell-60 responsive-hide"><a class="avatar" href="javascript:void(0)"><img class="img-responsive" src="'+a.avatar+'" alt="..."></a></td><td><div class="content"><div class="title">'+a.name+'</div><div class="abstract">'+a.title+'</div></div></td><td class="cell-30 responsive-hide">'+(a.attachments.length>0?'<i class="icon md-attachment-alt" aria-hidden="true"></i>':"")+'</td><td class="cell-130"><div class="time">'+a.time+"</div>"+(a.group.length>0?'<div class="identity"><i class="md-circle '+a.color+'" aria-hidden="true"></i>'+a.group+"</div>":"")+"</td></tr>"},attachmentsTpl:function(a){var t=this,e="";return e+='<div class="mail-attachments"><p><i Class="icon md-attachment-alt"></i>Attachments | <a href="javascript:void(0)">Download All</a></p><ul class="list-group">',i.each(a,function(a,i){e+=t.attachmentTpl(i)}),e+="</ul></div>"},attachmentTpl:function(a){return'<li class="list-group-item"><span class="name">'+a.name+'</span><span class="size">'+a.size+'</span><button type="button" class="btn btn-icon btn-pure btn-default"><i class="icon md-download" aria-hidden="true"></i></button></li>'},messagesTpl:function(a){var t="";return i.each(a.messages,function(i,e){t+='<section class="slidePanel-inner-section"><div class="mail-header"><div class="mail-header-main"><a class="avatar" href="javascript:void(0)"><img src="'+a.avatar+'" alt="..."></a><div><span class="name">'+a.name+'</span></div><div><a href="javascript:void(0)" class="mailbox-panel-email">'+a.email+'</a> to <a href="javascript:void(0)" class="margin-right-10">me</a><span class="identity"><i class="md-circle red-600" aria-hidden="true"></i>'+a.group+'</span></div></div><div class="mail-header-right"><span class="time">'+e.time+'</span><div class="btn-group btn-group-flat actions" role="group"><button type="button" class="btn btn-icon btn-pure btn-default"><i class="icon md-star" aria-hidden="true"></i></button><button type="button" class="btn btn-icon btn-pure btn-default"><i class="icon md-mail-reply" aria-hidden="true"></i></button></div></div></div><div class="mail-content">'+e.content+"</div>",0===i&&e.attachments&&e.attachments.length>0&&(t+=this.attachmentsTpl(e.attachments)),t+="</section>"}),t},initMail:function(){var a=this;i.getJSON("../../../assets/data/appsMailbox.json",function(t){var e=i("#mailboxTable");a.buildMail(e,t),a.initMailData(t),a.handlSlidePanelPlugin()})},initMailData:function(a){this.mailboxData=a},buildMail:function(a,t){var e=this,n=i("<tbody></tbody>");i.each(t,function(a,t){e.buildItem(n,t)}),a.empty().append(n)},buildItem:function(a,t){a.append(i(this.itemTpl(t)).data("mailInfo",t))},buildPanel:function(){},filter:function(a,t){},handlePanel:function(){i(a).on("click",'[data-mailbox="slidePanel"]',function(a){console.log(this,i(this))})},handlSlidePanelPlugin:function(){if(void 0!==i.slidePanel){var t=this,e=i.components.getDefaults("slidePanel"),n=i.extend({},e,{template:function(a){return'<div class="'+a.classes.base+" "+a.classes.base+"-"+a.direction+'"><div class="'+a.classes.base+'-scrollable"><div><div class="'+a.classes.content+'"></div></div></div><div class="'+a.classes.base+'-handler"></div></div>'},afterLoad:function(a){var t=i(a.target);t.data("taskInfo");this.$panel.find("."+this.options.classes.base+"-scrollable").asScrollable({namespace:"scrollable",contentSelector:">",containerSelector:">"})},contentFilter:function(a,e){var n=i(e.target),l=n.data("mailInfo"),s=i(a);return i(".mailbox-panel-title",s).html(l.title),i(".slidePanel-messages",s).html(t.messagesTpl(l)),s}});i(a).on("click",'[data-mailbox="slidePanel"]',function(a){i.slidePanel.show({url:"panel.tpl",target:i(this)},n),a.stopPropagation()})}},run:function(a){this.handleAction(),this.handleListItem(),this.initMail(),i("#addlabelForm").modal({show:!1}),i("#addMailForm").modal({show:!1}),i(".checkbox-important").on("click",function(a){a.stopPropagation()}),this.handleMultiSelect(),a()}}),i(a).ready(function(){AppMailbox.run()})}(document,window,jQuery);